<html>
<head>
  <title>Hello World!</title>
  <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
</head>
<body id='target'>

</body>
<script>


let origin = window.location.origin.split('//')[1].split(':')[0]; // Returns base URL (i.e. localhost)
console.log(origin)
// Create WebSocket connection.
const ws = new WebSocket('ws:' + origin + ':8080');

// Connection opened
ws.addEventListener('open', function (event) {
    ws.send(JSON.stringify({
      cmd: 'newClient',
      data: 'hello'
    }));
});

// Listen for messages
ws.addEventListener('message', function (event) {
    console.log('Message from server ', event.data);
});


$( "#target" ).mousemove(function( event ) {
  
  msg = {
    data: {
      mouseX: event.pageX,
      mouseY: event.pageY
    },
    cmd: 'mouseState'
  }
  ws.send(JSON.stringify(msg))
  // $( "#log" ).append( "<div>" + msg + "</div>" );
});

</script>
</html>